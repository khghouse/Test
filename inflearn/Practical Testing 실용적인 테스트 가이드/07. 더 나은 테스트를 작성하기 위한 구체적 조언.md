
## 한 문단에 한 주제!

글쓰기를 할 때 한 문단에 반드시 하나의 주제만 들어가야 한다는 얘기를 많이 한다.  
잘 작성된 테스트 코드는 문서로서 기능을 하는데 이를 글쓰기 관점에서 보면  
테스트 = 문단으로 볼 수 있고, 테스트 또한 하나의 주제만 가져야 한다.   

테스트 코드에 논리 구조가 포함된다면 하나의 주제에 대한 테스트가 아닐 수 있다.  
이 경우 케이스를 분리하여 테스트 코드를 작성한다.
```java
// 하나의 테스트 코드에 n개의 주제
@Test
void containsStockTypeEx() {
    for (ProductType productType : productTypes) {
        if (case1) {
            assertThat(result).isFalse();
        }
        if (case2) {
            assertThat(result).isTrue();
        }
    }   
}
```

<br />

## 완벽하게 제어하기

랜덤 값 혹은 현재 날짜/시간 등에 의존하여 실행 시점에 따라 테스트 결과가 다른 코드는    
상위 레벨에서 그 값을 주입하여 제어할 수 있도록 했었다.

데이터의 생성일시를 기록하기 위해 테스트 코드에서 사용하는 LocalDateTime.now(), LocalDate.now()는  
사용해도 문제 되진 않지만, 이후 요구사항 변경을 대비하여 특정 날짜/시간을 명시적으로 정의하는 게 좋다.

<br />

## 테스트 환경의 독립성을 보장하자

테스트를 진행하기 위한 준비 과정에서 (given)  
이미 구현된 기능을 사용하여 테스트 간 결합도가 생길 수 있다.
```java
/* 테스트 주제 : 재고가 부족한 상품으로 주문을 생성하려는 경우 예외가 발생한다. */

// given
stock1.deductQuantity(3); // 재고 차감 메서드 호출 -> 메서드 내 Exception 발생

// when
// -> 주문 생성 시점에 재고 부족으로 예외 처리를 기대했으나 테스트를 준비하는 과정에서 예외 발생
// -> 테스트 환경의 독립성이 보장되지 못함

// then
```

<br />

## 테스트 간 독립성을 보장하자

두 가지 이상의 테스트가 하나의 자원을 공유하는 경우, 테스트 결과에 영향을 미칠 수 있다.  

테스트 간 독립성이 보장되려면
- 테스트 간 순서라는 게 없어야 한다.
  - A (OK) -> B (OK) : 독립성이 보장되지 않음
- 각 테스트는 독립적으로 언제 수행되든 항상 같은 결과여야 한다.

<br />

## 한 눈에 들어오는 Test Fixture 구성하기

텍스트 픽스처 (Test Fixture)
- Fixture : 고정물, 고정되어 있는 물체
- 테스트의 목적, 환경을 위해서 원하는 상태 값으로 고정시킨 객체
- given절에서 생성했던 모든 객체들을 의미한다.

given절을 구성하는데 있어서 조언
- 

<br />

## Test Fixture 클렌징

<br />

## @ParameterizedTest

<br />

## @DynamicTest

<br />

## 테스트 수행도 비용이다. 환경 통합하기

<br />

## private 메서드의 테스트는 어떻게 하나요?

<br />

## 테스트에서만 필요한 메서드가 생겼는데 프로덕션 코드에서는 필요 없다면?


<br />

## 키워드 정리
